(set-logic ALL)
(set-option :dt-nested-rec true)
(declare-datatypes ((T 0)) (((nT) (cons (id Int) (arr (Array Int T)) ) )) )
(declare-const t1 T)
(declare-const t2 T)
(declare-const a1 (Array Int T))
(declare-const a2 (Array Int T))(assert (= (id (select (arr t2) (+ 3 (id (select a2 (id (select (arr (select a1 2)) 1))))))) 3))
(assert (= (select (arr t1) 2) (select a2 1)))
(assert (= t1 (select (arr t2) (id t2))))
(assert (= t1 (select (arr (select a2 1)) 2)))
(assert (= t1 t1))
(assert (= (id t2) (id t1)))
(assert (= (select (arr (select (arr t2) (id (select a1 (id (select a1 1)))))) 2) (select (arr (select (arr (select a2 (+ (- (+ (id (select a1 (id t1))) 3) 1) (id (select a2 2))))) (id t2))) (id t1))))
(assert (= t1 (select (arr (select a1 (id (select (arr (select (arr t1) 1)) (id (select a2 (id t2))))))) (- 3 1))))
(assert (= t2 t1))
(assert (= (select (arr (select (arr (select (arr (select a1 1)) (id t1))) 1)) 2) (select a2 (id t1))))
(check-sat)
